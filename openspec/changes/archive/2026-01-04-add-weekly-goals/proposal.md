# Change: 添加周目标管理功能

## Why
用户需要将季度目标拆解为更细致的周目标，以便更好地管理和追踪中期目标的实现进度。当前系统虽然支持季度目标，但缺少周级别的拆解和追踪能力，无法帮助用户在一周的时间维度上进行有效规划和执行。

周目标功能可以帮助用户：
- 将季度目标拆解为可执行的周目标
- 通过周目标的完成进度自动计算季度目标进度
- 在更短的时间周期内追踪目标完成情况
- 建立"季度目标-周目标"的层级关系和加权计算机制
- 提供独立的周目标视图，同时支持关联到季度目标

## What Changes
- **添加周目标数据模型**：包括目标标题、描述、目标年份、目标季度、目标周数、完成状态、进度百分比、关联的季度目标 ID、权重占比、标签、创建时间等
- **添加周目标管理 UI 组件**：独立的底部抽屉式模态框，与季度目标追踪器风格一致但独立展示
- **添加周目标列表显示**：支持按年份、季度和周数筛选、按完成状态排序
- **添加周目标创建/编辑功能**：表单界面，支持设定目标信息、选择关联的季度目标、设定权重占比
- **实现季度目标关联和权重系统**：创建周目标时可选择关联的季度目标，并设定该周目标在季度目标中的权重占比
- **实现自动进度计算**：当周目标关联到季度目标时，季度目标的进度自动根据关联的所有周目标的加权平均值计算
- **添加周目标进度追踪**：手动更新进度百分比，变更后触发关联季度目标的进度重算
- **添加周目标删除功能**：确认后删除目标，删除后触发关联季度目标的进度重算
- **集成数据存储系统**：使用现有的 DataStorage 类进行持久化和同步
- **添加导航入口**：在主界面底部导航栏或设置中添加入口
- **修改季度目标显示**：在季度目标列表中显示关联的周目标信息和自动计算的进度（区分手动设置和自动计算）

## Impact
### 影响的规范
- 修改 `goal-management` 能力规范（添加周目标相关需求，修改季度目标进度计算逻辑）

### 影响的代码
- `lib/storage.js` - 添加 `weeklyGoals` 数据合并逻辑
- `components/` - 新增 `weekly-goals-tracker.js` 组件
- `components/quarterly-goals-tracker.js` - 修改以显示关联的周目标信息和自动计算的进度
- `app/page.js` - 集成周目标数据、UI 和进度计算逻辑
- `app/globals.css` - 可能需要添加特定样式（如果需要）

### 数据库/存储影响
- LocalStorage 新增 `weeklyGoals` 键
- 服务器备份目录新增 `weeklyGoals.json` 文件
- 数据导出/导入功能需要包含周目标数据
- 季度目标数据结构需要支持区分手动进度和自动计算进度（添加 `autoCalculated` 字段）

### 兼容性
- **向后兼容**：旧版本数据不包含 weeklyGoals 键时，默认为空数组
- **季度目标兼容**：未关联周目标的季度目标继续使用手动进度设置
- 不影响现有任务、习惯、标签、年度目标、季度目标等功能

### Breaking Changes
- **部分破坏性变更**：季度目标的进度计算逻辑会改变。当季度目标关联了周目标后，其进度将自动计算，用户无法手动修改进度（除非先解除所有关联的周目标）

